{"version":3,"sources":["views/Referrals/index.tsx"],"names":["Header","styled","div","theme","colors","textSubtle","Content","ContentCenter","Row","ReferralLink","Button","CenterWrapper","Table","TableHeader","HeaderCellL","HeaderCellR","TableBody","BodyCellL","BodyCellR","ReferralRewardsDiv","data","referralsCount","totalReferralCommissions","DECIMAL_PLACES","BigNumber","pow","account","useWeb3React","useToast","toastSuccess","toastError","referralURL","substring","ReferralRewards","masterChefContract","useMasterchef","useState","setData","useEffect","a","address","methods","call","totalReferralCommissionsBigNumber","toString","fetchData","as","scale","color","onClick","navigator","clipboard","writeText","error"],"mappings":"mSASMA,EAASC,IAAOC,IAAV,8GACiB,qBAAGC,MAAkBC,OAAOC,cAKnDC,EAAUL,IAAOC,IAAV,2HAOPK,EAAgBN,IAAOC,IAAV,kJAQbM,EAAMP,IAAOC,IAAV,mIAQHO,EAAeR,IAAOC,IAAV,kEAKZQ,EAAST,IAAOC,IAAV,mkBA8BNS,EAAgBV,IAAOC,IAAV,0FAMbU,EAAQX,IAAOC,IAAV,gKASLW,EAAcZ,IAAOC,IAAV,2IAQXY,EAAcb,IAAOC,IAAV,6KASXa,EAAcd,IAAOC,IAAV,wIAQXc,EAAYf,IAAOC,IAAV,sGAOTe,EAAYhB,IAAOC,IAAV,6KASTgB,EAAYjB,IAAOC,IAAV,wIAQTiB,EAAqB,SAAC,GAAc,IAAZC,EAAW,EAAXA,KAC5B,OACE,cAACT,EAAD,UACE,eAACC,EAAD,WACE,eAACC,EAAD,WACE,cAACC,EAAD,6BACA,cAACC,EAAD,+BAEF,eAACC,EAAD,WACE,cAACC,EAAD,UAAaG,EAAKC,iBAClB,cAACH,EAAD,UAAaE,EAAKE,oCAOb,qBACb,IAAMC,EAAiB,IAAIC,IAAU,IAAIC,IAAI,IACrCC,EAAYC,cAAZD,QAFW,EAGkBE,cAA7BC,EAHW,EAGXA,aAAcC,EAHH,EAGGA,WAChBC,EAAeL,EAAO,uCAAmCA,EAAQM,UAAU,IAAO,KAElFC,EAAkB,WACtB,IAAMC,EAAqBC,cADC,EAEJC,mBAAS,IAFL,mBAErBhB,EAFqB,KAEfiB,EAFe,KAoB5B,OAhBAC,qBAAU,WAAM,4CACd,kCAAAC,EAAA,6DACQC,EAAWd,GAAW,6CAD9B,SAE+BQ,EAAmBO,QAAQpB,eAAemB,GAASE,OAFlF,cAEQrB,EAFR,YAGgDG,IAHhD,SAGgEU,EAAmBO,QAAQnB,yBAAyBkB,GAASE,OAH7H,mBAGQC,EAHR,eAIQrB,EAA2BqB,EAAkCzC,IAAIqB,GAAgBqB,WAEvFP,EAAQ,CACNhB,iBACAC,6BARJ,6CADc,uBAAC,WAAD,wBAaduB,KACC,CAACX,IAEG,cAACf,EAAD,CAAoBC,KAAMA,KAYnC,OACE,eAAC,IAAD,WACE,cAACpB,EAAD,UACE,cAAC,IAAD,CAAS8C,GAAG,KAAKC,MAAM,MAAMC,MAAM,YAAnC,yBAKgB,OAAhBjB,EACA,cAACzB,EAAD,UACE,cAACE,EAAD,2FAGF,eAACD,EAAD,WACE,cAACC,EAAD,0HAEA,cAACG,EAAD,UACE,cAACH,EAAD,UACE,cAACE,EAAD,CAAQuC,QA3BJ,WACd,IACEC,UAAUC,UAAUC,UAAUrB,GAC9BF,EAAa,yCACb,MAAOwB,GACPvB,EAAW,8DAsBH,sBAIJ,cAACnB,EAAD,UACE,cAACH,EAAD,UACE,cAACC,EAAD,UAAesB,QAInB,cAACE,EAAD","file":"static/js/12.5a226630.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Page from \"components/layout/Page\";\nimport styled from \"styled-components\";\nimport useToast from \"hooks/useToast\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Heading } from \"@plasmaswap/uikit\";\nimport { useMasterchef } from \"hooks/useContract\";\nimport BigNumber from \"bignumber.js\";\n\nconst Header = styled.div`\n  border-bottom: 2px solid ${({ theme }) => theme.colors.textSubtle};\n  margin-bottom: 24px;\n  padding-bottom: 32px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  flex-direction: column;\n  align-items: flex-start;\n`;\n\nconst ContentCenter = styled.div`\n  display: flex;\n  flex-wrap: nowrap;\n  flex-direction: column;\n  align-items: flex-start;\n  text-align: center;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 16px;\n  font-size: 32px;\n  color: white;\n`;\n\nconst ReferralLink = styled.div`\n  display: flex;\n  font-size: 16px;\n`;\n\nconst Button = styled.div`\n  padding: 0;\n  color: white;\n  width: 64px;\n  height: 32px;\n  cursor: pointer;\n  font-size: 16px;\n  font-weight: 600;\n  background-color: #51a995;\n  user-select: none;\n  -ms-user-select: none;\n  -moz-user-select: none;\n  -khtml-user-select: none;\n  -webkit-user-select: none;\n  border-radius: 6px;\n  text-align: center;\n  line-height: 28px;\n\n  :hover {\n    opacity: 0.85;\n  }\n\n  :active {\n    -webkit-transform: translateY(1px);\n    -ms-transform: translateY(1px);\n    transform: translateY(1px);\n    box-shadow: none;\n  }\n`;\n\nconst CenterWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 100%;\n`;\n\nconst Table = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n  color: white;\n  border: 2px solid #51a997;\n  border-radius: 6px;\n`;\n\nconst TableHeader = styled.div`\n  display: flex;\n  height: 48px;\n  padding: 0 8px;\n  font-size: 24px;\n  border-bottom: 2px solid #51a997;\n`;\n\nconst HeaderCellL = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding-right: 8px;\n  border-right: 2px solid #51a997;\n  justify-content: center;\n`;\n\nconst HeaderCellR = styled.div`\n  display: flex;\n  width: 100%;\n  align-items: center;\n  padding-left: 8px;\n  justify-content: center;\n`;\n\nconst TableBody = styled.div`\n  display: flex;\n  height: 32px;\n  padding: 0 8px;\n  font-size: 16px;\n`;\n\nconst BodyCellL = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  padding-right: 8px;\n  border-right: 2px solid #51a997;\n  justify-content: center;\n`;\n\nconst BodyCellR = styled.div`\n  display: flex;\n  width: 100%;\n  align-items: center;\n  padding-left: 8px;\n  justify-content: center;\n`;\n\nconst ReferralRewardsDiv = ({ data }) => {\n  return (\n    <CenterWrapper>\n      <Table>\n        <TableHeader>\n          <HeaderCellL>Users Referred</HeaderCellL>\n          <HeaderCellR>PLASMA Earned</HeaderCellR>\n        </TableHeader>\n        <TableBody>\n          <BodyCellL>{ data.referralsCount }</BodyCellL>\n          <BodyCellR>{ data.totalReferralCommissions }</BodyCellR>\n        </TableBody>\n      </Table>\n    </CenterWrapper>\n  );\n};\n\nexport default () => {\n  const DECIMAL_PLACES = new BigNumber(10).pow(18);\n  const { account } = useWeb3React();\n  const { toastSuccess, toastError } = useToast();\n  const referralURL = (account ? `https://plasmaswap.com?refer=${account.substring(2)}` : null);\n\n  const ReferralRewards = () => {\n    const masterChefContract = useMasterchef();\n    const [data, setData] = useState({});\n\n    useEffect(() => {\n      async function fetchData() {\n        const address = (account || \"0x0000000000000000000000000000000000000000\");\n        const referralsCount = await masterChefContract.methods.referralsCount(address).call();\n        const totalReferralCommissionsBigNumber = new BigNumber(await masterChefContract.methods.totalReferralCommissions(address).call());\n        const totalReferralCommissions = totalReferralCommissionsBigNumber.div(DECIMAL_PLACES).toString();\n\n        setData({\n          referralsCount,\n          totalReferralCommissions\n        });\n      }\n\n      fetchData();\n    }, [masterChefContract]);\n\n    return <ReferralRewardsDiv data={data} />\n  };\n\n  const copyURL = () => {\n    try {\n      navigator.clipboard.writeText(referralURL);\n      toastSuccess(\"Referral link copied to the clipboard\");\n    } catch (error) {\n      toastError(\"Unable to copy to the clipboard; please manually copy it\");\n    }\n  }\n\n  return (\n    <Page>\n      <Header>\n        <Heading as=\"h1\" scale=\"xxl\" color=\"secondary\">\n          Referrals\n        </Heading>\n      </Header>\n\n      {(referralURL === null ?\n        <Content>\n          <Row>Please connect your wallet in order to view your referral link and rewards</Row>\n        </Content>\n        :\n        <ContentCenter>\n          <Row>You can refer others to Plasma Swap with the link below, and you&apos;ll earn 1% of all PLASMA that they harvest</Row>\n\n          <CenterWrapper>\n            <Row>\n              <Button onClick={copyURL}>Copy</Button>\n            </Row>\n          </CenterWrapper>\n\n          <CenterWrapper>\n            <Row>\n              <ReferralLink>{referralURL}</ReferralLink>\n            </Row>\n          </CenterWrapper>\n\n          <ReferralRewards />\n        </ContentCenter>\n      )}\n    </Page>\n  );\n};\n"],"sourceRoot":""}